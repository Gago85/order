
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>GoodBuns Заказ (Защищён)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial; background: #f3f4f6; padding: 20px; }
        .container { max-width: 700px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1, h2 { text-align: center; }
        input[type="text"], input[type="number"], select, button {
            width: 100%; padding: 10px; margin: 5px 0;
        }
        table { width: 100%; margin-top: 15px; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 8px; }
        th { background: #e9ecef; }
        .add-btn { background: #007bff; color: white; border: none; padding: 10px; margin-top: 10px; cursor: pointer; border-radius: 5px; }
        .add-btn:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="container" id="auth">
        <h2>Доступ к заказу</h2>
        <p>Введите код доступа:</p>
        <input type="text" id="access-code" placeholder="Введите код">
        <button onclick="checkCode()">Войти</button>
    </div>

    <div id="main-form" style="display:none;">
        
    <div class="container">
        <h1>GoodBuns Заказ</h1>
        <label>Выберите точку:</label>
        <select id="point">
            <option>Магистраль</option>
            <option>Омега</option>
            <option>Гефест</option>
            <option>Черри</option>
            <option>Холл</option>
        </select>

        <label>День недели:</label>
        <select id="day">
            <option>Пн</option>
            <option>Вт</option>
            <option>Ср</option>
            <option>Чт</option>
            <option>Пт</option>
        </select>

        <h3>Основные товары</h3>
        <table>
            <thead>
                <tr><th>Наименование</th><th>Кол-во</th></tr>
            </thead>
            <tbody id="order-body">
                <tr><td>Cafiza 1кг</td><td><input type='number' name='Cafiza 1кг' min='0' value='0'></td></tr>
<tr><td>Апельсин</td><td><input type='number' name='Апельсин' min='0' value='0'></td></tr>
<tr><td>Апельсиновый сок 1л</td><td><input type='number' name='Апельсиновый сок 1л' min='0' value='0'></td></tr>
<tr><td>Арахисовая Паста</td><td><input type='number' name='Арахисовая Паста' min='0' value='0'></td></tr>
<tr><td>Бадьян </td><td><input type='number' name='Бадьян ' min='0' value='0'></td></tr>
<tr><td>Банановый</td><td><input type='number' name='Банановый' min='0' value='0'></td></tr>
<tr><td>Белезна</td><td><input type='number' name='Белезна' min='0' value='0'></td></tr>
<tr><td>БонАква 0.5 </td><td><input type='number' name='БонАква 0.5 ' min='0' value='0'></td></tr>
<tr><td>Бумажные пакеты </td><td><input type='number' name='Бумажные пакеты ' min='0' value='0'></td></tr>
<tr><td>Вилки</td><td><input type='number' name='Вилки' min='0' value='0'></td></tr>
<tr><td>Вода 5л</td><td><input type='number' name='Вода 5л' min='0' value='0'></td></tr>
<tr><td>Вода Газ 1,5л</td><td><input type='number' name='Вода Газ 1,5л' min='0' value='0'></td></tr>
<tr><td>Гвозьдика</td><td><input type='number' name='Гвозьдика' min='0' value='0'></td></tr>
<tr><td>Губка</td><td><input type='number' name='Губка' min='0' value='0'></td></tr>
<tr><td>Зева</td><td><input type='number' name='Зева' min='0' value='0'></td></tr>
<tr><td>Зерно фильтр</td><td><input type='number' name='Зерно фильтр' min='0' value='0'></td></tr>
<tr><td>Имбирный</td><td><input type='number' name='Имбирный' min='0' value='0'></td></tr>
<tr><td>Какао 1кг</td><td><input type='number' name='Какао 1кг' min='0' value='0'></td></tr>
<tr><td>Кедровые Орехи  </td><td><input type='number' name='Кедровые Орехи  ' min='0' value='0'></td></tr>
<tr><td>Клюквеный</td><td><input type='number' name='Клюквеный' min='0' value='0'></td></tr>
<tr><td>Кокосовый </td><td><input type='number' name='Кокосовый ' min='0' value='0'></td></tr>
<tr><td>Контейнера RK</td><td><input type='number' name='Контейнера RK' min='0' value='0'></td></tr>
<tr><td>Корица Молотая</td><td><input type='number' name='Корица Молотая' min='0' value='0'></td></tr>
<tr><td>Корица Пальчиковая </td><td><input type='number' name='Корица Пальчиковая ' min='0' value='0'></td></tr>
<tr><td>Кофе эспрессо №4</td><td><input type='number' name='Кофе эспрессо №4' min='0' value='0'></td></tr>
<tr><td>Крышки 80</td><td><input type='number' name='Крышки 80' min='0' value='0'></td></tr>
<tr><td>Крышки 90</td><td><input type='number' name='Крышки 90' min='0' value='0'></td></tr>
<tr><td>Крышки Шейк</td><td><input type='number' name='Крышки Шейк' min='0' value='0'></td></tr>
<tr><td>Лайм</td><td><input type='number' name='Лайм' min='0' value='0'></td></tr>
<tr><td>Лента Кассовая 80на80</td><td><input type='number' name='Лента Кассовая 80на80' min='0' value='0'></td></tr>
<tr><td>Лента Терминал</td><td><input type='number' name='Лента Терминал' min='0' value='0'></td></tr>
<tr><td>Лимон</td><td><input type='number' name='Лимон' min='0' value='0'></td></tr>
<tr><td>Ловушки</td><td><input type='number' name='Ловушки' min='0' value='0'></td></tr>
<tr><td>Ложки</td><td><input type='number' name='Ложки' min='0' value='0'></td></tr>
<tr><td>Малина </td><td><input type='number' name='Малина ' min='0' value='0'></td></tr>
<tr><td>Маракуйя</td><td><input type='number' name='Маракуйя' min='0' value='0'></td></tr>
<tr><td>Матча</td><td><input type='number' name='Матча' min='0' value='0'></td></tr>
<tr><td>Мешалки</td><td><input type='number' name='Мешалки' min='0' value='0'></td></tr>
<tr><td>Миндальный </td><td><input type='number' name='Миндальный ' min='0' value='0'></td></tr>
<tr><td>Молоко 3,2%</td><td><input type='number' name='Молоко 3,2%' min='0' value='0'></td></tr>
<tr><td>Мусорные 240л</td><td><input type='number' name='Мусорные 240л' min='0' value='0'></td></tr>
<tr><td>Мята</td><td><input type='number' name='Мята' min='0' value='0'></td></tr>
<tr><td>Облепиховый</td><td><input type='number' name='Облепиховый' min='0' value='0'></td></tr>
<tr><td>Пакеты Майка</td><td><input type='number' name='Пакеты Майка' min='0' value='0'></td></tr>
<tr><td>Пергамент</td><td><input type='number' name='Пергамент' min='0' value='0'></td></tr>
<tr><td>Перчатки </td><td><input type='number' name='Перчатки ' min='0' value='0'></td></tr>
<tr><td>Подставка 2х</td><td><input type='number' name='Подставка 2х' min='0' value='0'></td></tr>
<tr><td>Подставка 4х</td><td><input type='number' name='Подставка 4х' min='0' value='0'></td></tr>
<tr><td>Пряный Чай 250г</td><td><input type='number' name='Пряный Чай 250г' min='0' value='0'></td></tr>
<tr><td>Салфетки </td><td><input type='number' name='Салфетки ' min='0' value='0'></td></tr>
<tr><td>Сахар 1кг</td><td><input type='number' name='Сахар 1кг' min='0' value='0'></td></tr>
<tr><td>Сенча</td><td><input type='number' name='Сенча' min='0' value='0'></td></tr>
<tr><td>Сливки 11%</td><td><input type='number' name='Сливки 11%' min='0' value='0'></td></tr>
<tr><td>Соевый </td><td><input type='number' name='Соевый ' min='0' value='0'></td></tr>
<tr><td>Стакан 0.1</td><td><input type='number' name='Стакан 0.1' min='0' value='0'></td></tr>
<tr><td>Стакан 0.2</td><td><input type='number' name='Стакан 0.2' min='0' value='0'></td></tr>
<tr><td>Стакан 0.3</td><td><input type='number' name='Стакан 0.3' min='0' value='0'></td></tr>
<tr><td>Стакан 0.4</td><td><input type='number' name='Стакан 0.4' min='0' value='0'></td></tr>
<tr><td>Стакан Шейк 0.4</td><td><input type='number' name='Стакан Шейк 0.4' min='0' value='0'></td></tr>
<tr><td>Стекломой</td><td><input type='number' name='Стекломой' min='0' value='0'></td></tr>
<tr><td>Татни (12шт)</td><td><input type='number' name='Татни (12шт)' min='0' value='0'></td></tr>
<tr><td>Тоник </td><td><input type='number' name='Тоник ' min='0' value='0'></td></tr>
<tr><td>Трубочки</td><td><input type='number' name='Трубочки' min='0' value='0'></td></tr>
<tr><td>Тряпка из микрофибры</td><td><input type='number' name='Тряпка из микрофибры' min='0' value='0'></td></tr>
<tr><td>Тряпки половые </td><td><input type='number' name='Тряпки половые ' min='0' value='0'></td></tr>
<tr><td>Фери</td><td><input type='number' name='Фери' min='0' value='0'></td></tr>
<tr><td>Фильтр для чая</td><td><input type='number' name='Фильтр для чая' min='0' value='0'></td></tr>
<tr><td>Фильтры для Bovilor 50шт</td><td><input type='number' name='Фильтры для Bovilor 50шт' min='0' value='0'></td></tr>
<tr><td>Фундучный</td><td><input type='number' name='Фундучный' min='0' value='0'></td></tr>
<tr><td>Шиповник</td><td><input type='number' name='Шиповник' min='0' value='0'></td></tr>
<tr><td>Шуманит </td><td><input type='number' name='Шуманит ' min='0' value='0'></td></tr>
<tr><td>ЭрлГрей</td><td><input type='number' name='ЭрлГрей' min='0' value='0'></td></tr>
<tr><td>Ягодный</td><td><input type='number' name='Ягодный' min='0' value='0'></td></tr>
<tr><td>лёд</td><td><input type='number' name='лёд' min='0' value='0'></td></tr>
<tr><td>пемалюкс</td><td><input type='number' name='пемалюкс' min='0' value='0'></td></tr>
<tr><td>сок ЯН</td><td><input type='number' name='сок ЯН' min='0' value='0'></td></tr>
<tr><td>фильры для чая </td><td><input type='number' name='фильры для чая ' min='0' value='0'></td></tr>
<tr><td>цедра</td><td><input type='number' name='цедра' min='0' value='0'></td></tr>
            </tbody>
        </table>

        <h3>Сиропы</h3>
        <div id="syrup-block"></div>
        <button type="button" class="add-btn" onclick="addSyrup()">+ Добавить сироп</button>

        <h3>Топпинги</h3>
        <div id="topping-block"></div>
        <button type="button" class="add-btn" onclick="addTopping()">+ Добавить топпинг</button>

        <button onclick="submitOrder()">Отправить заказ</button>
    </div>

    <script>
        const syrups = ["Солёная карамель", "Карамель", "Ваниль", "Банан", "Шоколад", "Клубника", "Hazel Nut", "Фисташковый", "Маракуйя", "Лаванда", "Яблочный пирог", "Кокос", "Мята", "Малина", "Апельсин"];
        const toppings = ["Топпинг Банан", "Топпинг Шоколад", "Топпинг Карамель", "Сгущенное молоко", "Мороженое"];

        function addDropdown(containerId, optionsArray) {
            const container = document.getElementById(containerId);
            const div = document.createElement("div");
            const select = document.createElement("select");
            optionsArray.forEach(opt => {
                const option = document.createElement("option");
                option.text = opt;
                select.add(option);
            });
            const qty = document.createElement("input");
            qty.type = "number";
            qty.min = "0";
            qty.placeholder = "Количество";
            qty.style.marginTop = "5px";
            div.appendChild(select);
            div.appendChild(qty);
            container.appendChild(div);
        }

        function addSyrup() {
            addDropdown("syrup-block", syrups);
        }

        function addTopping() {
            addDropdown("topping-block", toppings);
        }

        function submitOrder() {
            const point = document.getElementById("point").value;
            const day = document.getElementById("day").value;
            const items = [];

            document.querySelectorAll("#order-body tr").forEach(row => {
                const name = row.children[0].innerText;
                const qty = row.children[1].children[0].value;
                if (qty && parseInt(qty) > 0) {
                    items.push({ name, qty });
                }
            });

            document.querySelectorAll("#syrup-block > div").forEach(div => {
                const name = div.children[0].value;
                const qty = div.children[1].value;
                if (qty && parseInt(qty) > 0) {
                    items.push({ name, qty });
                }
            });

            document.querySelectorAll("#topping-block > div").forEach(div => {
                const name = div.children[0].value;
                const qty = div.children[1].value;
                if (qty && parseInt(qty) > 0) {
                    items.push({ name, qty });
                }
            });

            fetch("https://server-o00c.onrender.com/order", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ point, day, items })
            })
            .then(res => res.json())
            .then(data => {
                alert("✅ Заказ отправлен!");
                console.log(data);
            })
            .catch(err => {
                alert("❌ Ошибка при отправке заказа!");
                console.error(err);
            });
        }

        window.onload = () => {
            addSyrup();
            addTopping();
        };
    </script>

    </div>

    <script>
        function checkCode() {
            const input = document.getElementById("access-code").value.trim().toLowerCase();
            if (input === "libertas") {
                document.getElementById("auth").style.display = "none";
                document.getElementById("main-form").style.display = "block";
            } else {
                alert("❌ Неверный код доступа");
            }
        }
    </script>
</body>
</html>
